# Task 3.8: Release & CI/CD Setup

**Phase**: 3 (Polish, Integration & Deploy)  
**Complexity**: Small  
**Status**: Not Started

## Description

Implement continuous integration and continuous deployment pipeline with automated testing and releases.

## Details

- GitHub Actions workflows:
  - Main test workflow:
    - Trigger on push to main and pull requests
    - Run on Linux (ubuntu-latest)
    - Steps:
      - Checkout code
      - Set up Go environment
      - Run `go mod download`
      - Run `go test ./...`
      - Generate coverage report
      - Run linter (golangci-lint)
      - Upload coverage to Codecov (optional)
  
  - Build workflow:
    - Trigger on tags (v*.*.*)
    - Build binary for multiple platforms (Linux, macOS)
    - Create release with binaries
    - Build and push Docker image

  - Database migration test:
    - Test migrations work correctly
    - Run against fresh database
    - Verify schema matches expected

- Linting configuration:
  - golangci-lint configuration (.golangci.yml)
  - Enabled linters: golint, vet, ineffassign, misspell, gofmt
  - Code quality thresholds
  - Exclude patterns for generated code

- Code coverage reporting:
  - Generate coverage report on each test run
  - Upload to Codecov or similar service
  - Enforce minimum coverage threshold (80%)
  - Per-package coverage tracking

- Version management:
  - Semantic versioning (MAJOR.MINOR.PATCH)
  - Version string embedded in binary
  - Version command: `stalkeer version`
  - Build information (git commit, timestamp)

- Release process:
  - Git tags trigger releases
  - Automated changelog generation
  - GitHub release creation
  - Docker image tagging
  - Binary artifact uploads

- Release notes template:
  - Features added
  - Bug fixes
  - Breaking changes (if any)
  - Upgrade instructions
  - Known issues

- Pre-release checks:
  - All tests pass
  - Coverage meets threshold
  - Linter passes
  - Documentation updated
  - Version number bumped

## Dependencies

- All Phase 1-3 tasks (for complete CI/CD)

## Acceptance Criteria

- [ ] GitHub Actions workflows configured and functional
- [ ] Tests run on every push and PR
- [ ] Linting configured and passing
- [ ] Coverage reports generated
- [ ] Build workflow creates release artifacts
- [ ] Docker images build and push on release
- [ ] Version command shows correct version
- [ ] Release process fully automated
- [ ] Release notes generated accurately
